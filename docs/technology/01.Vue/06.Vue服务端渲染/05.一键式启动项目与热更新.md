---
title: 一键式启动项目与热更新
date: 2021-01-30 23:09:53
permalink: /pages/fac66c/
categories:
  - Vue
  - Vue服务端渲染
tags:
  - 
---
### 痛点

在经受完前面一堆代码的洗礼之后，相信读者或许感受到启动项目的不方便了，首先先得将业务代码按照两份配置构建一遍，接着再来启动服务，这让我们在调试过程中十分不友好。

不仅如此，我们在修改了前端页面代码之后，我们还得重新构建一遍，然后再启动项目，即便是只添加了一个字，我们都需要重复走一遍这个逻辑，是不是十分的难受。

### 需求

针对上述问题，这里提出几点优化目标：
1. 首先我们能否一键自动构建并启动项目，解决繁琐的启动流程。
2. 其次，是否能实现热更新能力，页面修改内容之后能无刷新更新页面。
3. 在具备了前端代码热更新能力之后，我们修改了`webpack`相关配置文件是否也能自动重新构建并重启服务。

### 优化
针对上述优化目标，这里也将逐一进行解决。

#### 一键启动项目

为了实现一键启动项目，这里需要修改一下服务端代码，集成`webpack`打包能力，话不多说，先上码：

```js
const webpack = require('webpack');
const WebpackDevMiddleware = require('webpack-dev-middleware');
const clientWebpackConfig = require('./build/webpack.client.config');
const serverWebpackConfig = require('./build/webpack.server.config');
const clientCompiler = webpack(clientWebpackConfig);
const serverCompiler = webpack(serverWebpackConfig);
// 客户端构建
const clientMiddleware = WebpackDevMiddleware(clientCompiler);
app.use(clientMiddleware);

// 服务端构建
const serverMiddleware = WebpackDevMiddleware(serverCompiler)
app.use(serverMiddleware);
```

未完待续...